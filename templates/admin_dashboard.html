<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kumbh Suraksha ‚Äì Admin Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Leaflet map styles for web map (same tiles as mobile app) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <style>
    :root {
      --primary-orange: #f97316;
      --bg-gray: #f1f5f9;
      --text-dark: #1e293b;
      --text-medium: #64748b;
      --text-light: #94a3b8;
      --border-soft: #e2e8f0;
      --emerald: #10b981;
      --yellow: #eab308;
      --rose: #f43f5e;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    html, body {
      height: 100%;
      width: 100%;
      overflow: hidden;
      background: var(--bg-gray);
      color: var(--text-dark);
    }

    .layout {
      display: flex;
      height: 100vh;
      width: 100vw;
    }

    .sidebar {
      width: 230px;
      background: #0f172a;
      color: #e5e7eb;
      padding: 20px 16px;
      display: flex;
      flex-direction: column;
      gap: 24px;
      flex-shrink: 0;
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .sidebar-logo-icon {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      background: var(--primary-orange);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 16px;
      box-shadow: 0 6px 14px rgba(249, 115, 22, 0.45);
    }

    .sidebar-logo-text {
      font-size: 14px;
      font-weight: 600;
    }

    .side-nav-group-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #64748b;
      margin-bottom: 6px;
    }

    .side-nav {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 13px;
      color: #cbd5f5;
      text-decoration: none;
      transition: background 0.15s ease, color 0.15s ease, transform 0.05s ease;
    }

    .nav-item span.nav-icon {
      width: 18px;
      text-align: center;
      font-size: 14px;
    }

    .nav-item:hover {
      background: rgba(148, 163, 184, 0.18);
    }

    .nav-item.active {
      background: #f97316;
      color: #0f172a;
      transform: translateY(-1px);
    }

    .nav-item.active span.nav-icon {
      color: #0f172a;
    }

    .sidebar-footer {
      margin-top: auto;
      padding-top: 20px;
      border-top: 1px solid rgba(148, 163, 184, 0.15);
    }

    .sidebar-footer-nav {
      display: none;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 16px;
    }

    .sidebar-footer-nav.show {
      display: flex;
    }

    .user-card {
      background: rgba(148, 163, 184, 0.1);
      border-radius: 12px;
      padding: 12px;
      margin-top: 12px;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .user-card:hover {
      background: rgba(148, 163, 184, 0.2);
    }

    .user-card.expanded {
      background: rgba(148, 163, 184, 0.15);
    }

    .user-card-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background: var(--primary-orange);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 600;
      font-size: 14px;
      flex-shrink: 0;
    }

    .user-info {
      flex: 1;
      min-width: 0;
    }

    .user-name {
      font-size: 13px;
      font-weight: 600;
      color: #e5e7eb;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .user-role {
      font-size: 11px;
      color: #94a3b8;
      margin-top: 2px;
    }

    .user-time {
      font-size: 10px;
      color: #64748b;
      margin-top: 6px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .shell {
      flex: 1;
      padding: 24px;
      overflow-y: auto;
      overflow-x: hidden;
      width: 100%;
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .brand-icon {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: var(--primary-orange);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 20px;
      box-shadow: 0 6px 14px rgba(249, 115, 22, 0.35);
    }

    .brand-title {
      font-size: 18px;
      font-weight: 700;
    }

    .brand-sub {
      font-size: 11px;
      color: var(--text-light);
    }

    .topbar-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .pill {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: #ffffff;
      font-size: 12px;
      color: var(--text-medium);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .logout-btn {
      border: none;
      border-radius: 999px;
      padding: 8px 14px;
      background: #fee2e2;
      color: #b91c1c;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
    }

    .kpi-row {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 16px;
      margin-bottom: 20px;
    }

    .kpi-card {
      background: #ffffff;
      border-radius: 16px;
      border: 1px solid #e2e8f0;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.04);
      padding: 14px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .kpi-icon {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      color: #fff;
    }

    .kpi-icon-red {
      background: var(--rose);
    }
    .kpi-icon-yellow {
      background: var(--yellow);
    }
    .kpi-icon-green {
      background: var(--emerald);
    }

    .kpi-label {
      font-size: 12px;
      color: var(--text-medium);
      margin-bottom: 2px;
    }

    .kpi-value {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-dark);
    }

    .map-wrapper {
      position: relative;
    }

    .map-legend {
      position: absolute;
      left: 16px;
      top: 12px;
      z-index: 1000;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      color: #e5e7eb;
      font-size: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
    }

    .grid {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.1fr);
      gap: 20px;
    }

    .card {
      background: #ffffff;
      border-radius: 20px;
      border: 1px solid #e2e8f0;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.05);
      padding: 20px 20px 18px;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .card-title {
      font-size: 15px;
      font-weight: 600;
    }

    .card-sub {
      font-size: 12px;
      color: var(--text-light);
    }

    .stats-row {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-top: 8px;
    }

    .stat {
      padding: 12px 12px 10px;
      border-radius: 16px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
    }

    .stat-label {
      font-size: 11px;
      color: var(--text-medium);
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 2px;
    }

    .stat-tag {
      font-size: 11px;
      font-weight: 600;
    }

    .tag-green {
      color: #15803d;
    }
    .tag-yellow {
      color: #a16207;
    }
    .tag-red {
      color: #b91c1c;
    }

    .list {
      margin-top: 12px;
      font-size: 12px;
      color: var(--text-medium);
    }

    .list-row {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px dashed #e2e8f0;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 600;
    }

    .badge-green {
      background: #dcfce7;
      color: #166534;
    }

    .badge-yellow {
      background: #fef9c3;
      color: #854d0e;
    }

    .badge-red {
      background: #fee2e2;
      color: #b91c1c;
    }

    .footer-note {
      margin-top: 18px;
      font-size: 11px;
      color: var(--text-light);
      text-align: right;
    }

    .bottom-grid {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.2fr);
      gap: 20px;
      margin-top: 20px;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .chip {
      padding: 6px 10px;
      border-radius: 999px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      font-size: 11px;
      color: var(--text-medium);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .chip-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--primary-orange);
    }

    .checklist {
      margin-top: 12px;
      font-size: 12px;
      color: var(--text-medium);
    }

    .checklist-item {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .check-icon {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: 1px solid #bbf7d0;
      background: #ecfdf3;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #15803d;
    }

    @media (max-width: 768px) {
      .layout {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
      }

      .side-nav {
        flex-direction: row;
        gap: 8px;
      }

      .nav-item {
        padding-inline: 10px;
      }
      .kpi-row {
        grid-template-columns: minmax(0, 1fr);
      }

      .grid {
        grid-template-columns: minmax(0, 1fr);
      }

      .bottom-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      .topbar {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }

      .topbar-right {
        align-self: stretch;
        justify-content: space-between;
      }
    }
  </style>
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <div>
        <div class="sidebar-logo">
          <div class="sidebar-logo-icon">‚õØ</div>
          <div class="sidebar-logo-text">Kumbh Suraksha</div>
        </div>
      </div>

      <div>
        <div class="side-nav-group-title">Overview</div>
        <nav class="side-nav">
          <a
            href="{% url 'kumbh:admin_dashboard' %}"
            class="nav-item {% if request.resolver_match.url_name == 'admin_dashboard' %}active{% endif %}"
          >
            <span class="nav-icon">üè†</span>
            <span>Dashboard</span>
          </a>
          <a
            href="{% url 'kumbh:admin_sos_requests' %}"
            class="nav-item {% if request.resolver_match.url_name == 'admin_sos_requests' %}active{% endif %}"
          >
            <span class="nav-icon">üö®</span>
            <span>SOS Requests</span>
          </a>
          <a
            href="{% url 'kumbh:admin_lost_found' %}"
            class="nav-item {% if request.resolver_match.url_name == 'admin_lost_found' %}active{% endif %}"
          >
            <span class="nav-icon">üß≠</span>
            <span>Lost / Found</span>
          </a>
          <a
            href="{% url 'kumbh:admin_amenities' %}"
            class="nav-item {% if request.resolver_match.url_name == 'admin_amenities' %}active{% endif %}"
          >
            <span class="nav-icon">üöª</span>
            <span>Amenities</span>
          </a>
          <a
            href="{% url 'kumbh:admin_crowding_zones' %}"
            class="nav-item {% if request.resolver_match.url_name == 'admin_crowding_zones' %}active{% endif %}"
          >
            <span class="nav-icon">üìç</span>
            <span>Crowding Zones</span>
          </a>
        </nav>
      </div>

      <div class="sidebar-footer">
        <nav class="sidebar-footer-nav" id="user-actions-menu">
          <a href="#" class="nav-item">
            <span class="nav-icon">üë§</span>
            <span>My Profile</span>
          </a>
          <a href="#" class="nav-item">
            <span class="nav-icon">‚öôÔ∏è</span>
            <span>Settings</span>
          </a>
          <a href="{% url 'kumbh:admin_logout' %}" class="nav-item">
            <span class="nav-icon">‚Ü™</span>
            <span>Logout</span>
          </a>
        </nav>

        <div class="user-card" id="user-card-trigger">
          <div class="user-card-header">
            <div class="user-avatar">
              {% if request.user.is_authenticated %}
                {{ request.user.email|first|upper }}
              {% else %}
                A
              {% endif %}
            </div>
            <div class="user-info">
              <div class="user-name">
                {% if request.user.is_authenticated %}
                  {{ request.user.full_name|default:request.user.email }}
                {% else %}
                  Admin
                {% endif %}
              </div>
              <div class="user-role">
                {% if request.user.is_superuser %}
                  Super Admin
                {% elif request.user.is_staff %}
                  Admin
                {% else %}
                  User
                {% endif %}
              </div>
            </div>
          </div>
          <div class="user-time">
            <span>üïê</span>
            <span id="current-time"></span>
          </div>
        </div>
      </div>
    </aside>

    <div class="shell">
    <header class="topbar">
      <div class="brand">
        <div class="brand-icon">‚õØ</div>
        <div>
          <div class="brand-title">Kumbh Suraksha ‚Äì Admin</div>
          <div class="brand-sub">‡§ï‡•Å‡§Ç‡§≠ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‚Ä¢ Command Dashboard</div>
        </div>
      </div>

      <div class="topbar-right">
        <div class="pill">
          <span style="width: 8px; height: 8px; border-radius: 999px; background: var(--emerald);"></span>
          <span>Online</span>
        </div>
        <div class="pill">
          {% if request.user.is_authenticated %}
          <span style="width: 8px; height: 8px; border-radius: 999px; background: var(--primary-orange);"></span>
          <span>{{ request.user.full_name|default:request.user.email }}</span>
          {% else %}
          <span>Guest</span>
          {% endif %}
        </div>
      </div>
    </header>

    <!-- KPI cards row -->
    <section class="kpi-row">
      <div class="kpi-card">
        <div class="kpi-icon kpi-icon-red">!</div>
        <div>
          <div class="kpi-label">SOS Requests (Last Hour)</div>
          <div class="kpi-value">27</div>
        </div>
      </div>
      <div class="kpi-card">
        <div class="kpi-icon kpi-icon-green">‚óé</div>
        <div>
          <div class="kpi-label">Lost / Found Reports (Today)</div>
          <div class="kpi-value">14</div>
        </div>
      </div>
      <div class="kpi-card">
        <div class="kpi-icon kpi-icon-yellow">‚ö†</div>
        <div>
          <div class="kpi-label">Overcrowded Zones</div>
          <div class="kpi-value">5</div>
        </div>
      </div>
    </section>

    <!-- Main content: map center + overcrowded zones list -->
    <main class="grid">
      <section class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Live Crowd Map</div>
            <div class="card-sub">Heatmap of SOS, overcrowding and lost/found cases</div>
          </div>
        </div>

        <div class="map-wrapper" style="margin-top: 8px;">
          <div class="map-legend">
            <span style="display: flex; align-items: center; gap: 4px;">
              <span class="legend-dot" style="background: var(--emerald);"></span><span>Safe</span>
            </span>
            <span style="display: flex; align-items: center; gap: 4px;">
              <span class="legend-dot" style="background: var(--yellow);"></span><span>Moderate</span>
            </span>
            <span style="display: flex; align-items: center; gap: 4px;">
              <span class="legend-dot" style="background: var(--primary-orange);"></span><span>High</span>
            </span>
            <span style="display: flex; align-items: center; gap: 4px;">
              <span class="legend-dot" style="background: var(--rose);"></span><span>Critical</span>
            </span>
          </div>
          <div
            id="crowd-map"
            style="
              width: 100%;
              height: 320px;
              border-radius: 18px;
              border: 1px solid var(--border-soft);
              overflow: hidden;
            "
          ></div>
        </div>
      </section>

      <section class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Overcrowded Zones</div>
            <div class="card-sub">Live list of sectors in yellow / red status</div>
          </div>
        </div>

        <div class="list">
          <div class="list-row">
            <span>Har Ki Pauri ‚Äì Sector A</span>
            <span class="badge badge-red">Red ‚Ä¢ Critical</span>
          </div>
          <div class="list-row">
            <span>VIP Ghat ‚Äì Sector C</span>
            <span class="badge badge-yellow">Yellow ‚Ä¢ High</span>
          </div>
          <div class="list-row">
            <span>Bridge Corridor ‚Äì Gate 3</span>
            <span class="badge badge-yellow">Yellow ‚Ä¢ Queue</span>
          </div>
          <div class="list-row">
            <span>Parking P3 ‚Äì Ingress</span>
            <span class="badge badge-red">Red ‚Ä¢ Blocked</span>
          </div>
        </div>
      </section>
    </main>

    <!-- Bottom row: amenities + next Shahi Snan update -->
    <section class="bottom-grid">
      <!-- Amenities card -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Amenities Available</div>
            <div class="card-sub">On-ground facilities for crowd comfort & safety</div>
          </div>
        </div>

        <div class="stats-row">
          <div class="stat">
            <div class="stat-label">Toilets</div>
            <div class="stat-value">132</div>
            <div class="stat-tag tag-green">All operational</div>
          </div>
          <div class="stat">
            <div class="stat-label">Medical Camps</div>
            <div class="stat-value">18</div>
            <div class="stat-tag tag-green">Ready</div>
          </div>
          <div class="stat">
            <div class="stat-label">Police / Help Desks</div>
            <div class="stat-value">26</div>
            <div class="stat-tag tag-yellow">Peak shift</div>
          </div>
        </div>

        <div class="chip-row">
          <span class="chip">
            <span class="chip-dot"></span>
            Drinking Water Points ‚Ä¢ 42
          </span>
          <span class="chip">
            <span class="chip-dot"></span>
            Shelters & Rest Areas ‚Ä¢ 9
          </span>
          <span class="chip">
            <span class="chip-dot"></span>
            Lost & Found Centers ‚Ä¢ 5
          </span>
        </div>
      </div>

      <!-- Next Shahi Snan card -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Next Shahi Snan</div>
            <div class="card-sub">Upcoming royal bath ‚Äì readiness snapshot</div>
          </div>
        </div>

        <div class="stat" style="margin-top: 4px;">
          <div class="stat-label">Date & Time</div>
          <div class="stat-value">14 Jan ‚Ä¢ 4:30 AM ‚Äì 11:30 AM</div>
          <div class="stat-tag tag-yellow">High expected turnout</div>
        </div>

        <div class="checklist">
          <div class="checklist-item">
            <span class="check-icon">‚úì</span>
            <span>Traffic diversion plan approved</span>
          </div>
          <div class="checklist-item">
            <span class="check-icon">‚úì</span>
            <span>Extra medical teams scheduled</span>
          </div>
          <div class="checklist-item">
            <span class="check-icon">‚úì</span>
            <span>Additional loudspeakers & signages placed</span>
          </div>
          <div class="checklist-item">
            <span class="check-icon">‚úì</span>
            <span>Lost & found control room staffed</span>
          </div>
        </div>
      </div>
    </section>
    </div>
  </div>

  <!-- Leaflet JS for interactive map (mirrors mobile app heatmap tiles) -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>
  <script>
    // Mirror mobile app map: OpenStreetMap tiles + crowd zones
    const map = L.map("crowd-map").setView([29.9457, 78.1642], 14);

    L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19,
      attribution: "&copy; OpenStreetMap contributors",
    }).addTo(map);

    function getZoneColor(color) {
      switch (color) {
        case "red":
          return "#F43F5E";
        case "orange":
          return "#F97316";
        case "yellow":
          return "#EAB308";
        case "green":
          return "#10B981";
        default:
          return "#3B82F6";
      }
    }

    // Same CROWD_ZONES as in the mobile app (lib/constants.dart)
    const CROWD_ZONES = [
      { id: 1, name: "Har Ki Pauri", status: "Moderate", color: "orange", capacity: 45, lat: 29.9576, lng: 78.1712 },
      { id: 2, name: "Triveni Ghat", status: "Safe", color: "green", capacity: 25, lat: 29.935, lng: 78.155 },
      { id: 3, name: "Ram Jhula", status: "High", color: "red", capacity: 75, lat: 29.965, lng: 78.185 },
      { id: 4, name: "Main Bazaar", status: "Critical", color: "red", capacity: 95, lat: 29.95, lng: 78.16 },
      { id: 5, name: "Lakshman Jhula", status: "Moderate", color: "yellow", capacity: 50, lat: 29.98, lng: 78.19 },
      { id: 6, name: "Bharat Mandir", status: "Safe", color: "green", capacity: 30, lat: 29.94, lng: 78.14 },
    ];

    CROWD_ZONES.forEach((zone) => {
      const color = getZoneColor(zone.color);
      L.circle([zone.lat, zone.lng], {
        color,
        fillColor: color,
        fillOpacity: 0.35,
        radius: 150 + zone.capacity * 5, // similar scale as mobile app
        weight: 1,
      })
        .addTo(map)
        .bindPopup(`<strong>${zone.name}</strong><br>Status: ${zone.status}`);
    });

    // Update current time in sidebar
    function updateTime() {
      const now = new Date();
      const hours = now.getHours();
      const minutes = now.getMinutes().toString().padStart(2, '0');
      const ampm = hours >= 12 ? 'PM' : 'AM';
      const displayHours = hours % 12 || 12;
      const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      const day = now.getDate();
      const month = monthNames[now.getMonth()];
      
      const timeString = `${displayHours}:${minutes} ${ampm} ‚Ä¢ ${month} ${day}`;
      const timeElement = document.getElementById('current-time');
      if (timeElement) {
        timeElement.textContent = timeString;
      }
    }

    // Update time immediately and then every minute
    updateTime();
    setInterval(updateTime, 60000);

    // Toggle user actions menu when clicking on user card
    const userCardTrigger = document.getElementById('user-card-trigger');
    const userActionsMenu = document.getElementById('user-actions-menu');

    if (userCardTrigger && userActionsMenu) {
      userCardTrigger.addEventListener('click', function() {
        const isExpanded = userActionsMenu.classList.contains('show');
        
        if (isExpanded) {
          userActionsMenu.classList.remove('show');
          userCardTrigger.classList.remove('expanded');
        } else {
          userActionsMenu.classList.add('show');
          userCardTrigger.classList.add('expanded');
        }
      });
    }
  </script>
</body>
</html>
